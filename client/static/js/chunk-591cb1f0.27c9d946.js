(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-591cb1f0"],{"29fd":function(e,t,a){"use strict";function r(e,t,a){var r,i,n,s=function(){r=setTimeout((function(){a||e.apply(i,n),clearTimeout(r),r=null}),t)};return function(){i=this,n=arguments,r?console.log("节流阀：忽略"):(console.log("节流阀：允许"),a&&e.apply(i,n),s())}}a.d(t,"a",(function(){return r}))},"6b49":function(e,t,a){e.exports={menuText:"#7f7f7f",menuActiveText:"#38ceb1",subMenuActiveText:"#38ceb1",menuBg:"#fff",menuHover:"#ecf8f3",subMenuBg:"#f1f1f1",subMenuHover:"#ecf8f3",sideBarWidth:"210px"}},"6c5d":function(e,t,a){"use strict";a("8444")},8444:function(e,t,a){},bff8:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"course-container-wrapper"},[a("div",{staticClass:"course-container"},[a("el-form",{staticClass:"form-search",staticStyle:{width:"100%"},attrs:{inline:!0,model:e.searchFormData,size:"mini"}},[a("el-form-item",{attrs:{label:"课程名称："}},[a("el-input",{model:{value:e.searchFormData.title,callback:function(t){e.$set(e.searchFormData,"title",t)},expression:"searchFormData.title"}})],1),a("el-form-item",{attrs:{label:"价格："}},[a("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.searchFormData.isFree,callback:function(t){e.$set(e.searchFormData,"isFree","string"===typeof t?t.trim():t)},expression:"searchFormData.isFree"}},[a("el-option",{attrs:{label:"收费",value:0}}),a("el-option",{attrs:{label:"免费",value:1}})],1)],1),a("el-form-item",{attrs:{label:"状态："}},[a("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.searchFormData.isAudit,callback:function(t){e.$set(e.searchFormData,"isAudit","string"===typeof t?t.trim():t)},expression:"searchFormData.isAudit"}},[a("el-option",{attrs:{label:"未审核",value:0}}),a("el-option",{attrs:{label:"已审核",value:1}})],1)],1),a("el-form-item",{staticClass:"btn-form-item"},[a("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"course-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.dataList.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),"highlight-current-row":"",stripe:""}},[a("el-table-column",{attrs:{label:"#",index:e.setIndex,type:"index",width:"100",align:"center"}}),a("el-table-column",{attrs:{property:"title",label:"课程标题","min-width":"100",align:"center"}}),a("el-table-column",{attrs:{property:"sort",label:"封面图","min-width":"135",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("img",{staticStyle:{width:"135px",height:"70px"},attrs:{src:t.cover,alt:"课程主封面"}})]}}])}),a("el-table-column",{attrs:{property:"authorName",label:"作者",align:"center","min-width":"100"}}),a("el-table-column",{attrs:{label:"原价",align:"center","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-tag",{attrs:{type:"info",effect:"plain"}},[e._v(" "+e._s(r.isFree?"免 费":r.priceOriginal)+" ")])]}}])}),a("el-table-column",{attrs:{label:"优惠价",align:"center","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-tag",{attrs:{type:"warning",effect:"plain"}},[e._v(" "+e._s(r.isFree?"无优惠":r.priceDiscount)+" ")])]}}])}),a("el-table-column",{attrs:{label:"状态",align:"center","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.isAudit?a("el-tag",{attrs:{type:"success"}},[e._v("已审核")]):a("el-tag",{attrs:{type:"warning"}},[e._v("未审核")])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"210"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.detail(r)}}},[e._v("详情")]),a("el-button",{attrs:{type:"info",plain:"",size:"mini",disabled:1===r.isAudit},on:{click:function(t){return e.handlerAudit(r)}}},[e._v("审核 ")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.handlerDel(r.id)}}},[e._v("删除 ")])]}}])})],1),a("div",{staticClass:"pagination-wrapper"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,15,20,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:"","popper-class":"drop-down-box"},on:{"current-change":e.handleCurrentChange,"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1),a("course-edit",{attrs:{courseInfo:e.courseInfo,dialogFormVisible:e.dialogFormVisible},on:{"update:dialogFormVisible":function(t){e.dialogFormVisible=t},"update:dialog-form-visible":function(t){e.dialogFormVisible=t},refreshList:e.fetchCourseList}})],1)])},i=[],n=a("1da1"),s=(a("96cf"),a("b775"));function o(){return Object(s["a"])({url:"/courses",method:"get"})}function l(e){return Object(s["a"])({url:"/courses/query",method:"get",params:e})}function c(e){return Object(s["a"])({url:"/courses/audit/success",method:"get",params:{id:e}})}function u(e){return Object(s["a"])({url:"/courses/audit/fail",method:"get",params:{id:e}})}function f(e){return Object(s["a"])({url:"/courses/".concat(e),method:"delete"})}var m=a("29fd"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-edit"},[a("el-dialog",{attrs:{title:"审核课程",visible:e.isVisible,"custom-class":"dialog-container"},on:{"update:visible":function(t){e.isVisible=t}}},[a("el-form",{attrs:{model:e.courseInfo,"label-position":"left",size:"small"}},[a("el-form-item",{attrs:{label:"课程标题：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{value:e.courseInfo.title,autocomplete:"off",disabled:""}})],1),a("el-form-item",{staticStyle:{"line-height":"normal"},attrs:{label:"封面图：","label-width":e.formLabelWidth}},[a("img",{staticStyle:{width:"220px",height:"120px"},attrs:{src:e.courseInfo.cover,alt:"课程主封面"}})]),a("el-form-item",{attrs:{label:"作者：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{value:e.courseInfo.authorName,autocomplete:"off",disabled:""}})],1),a("el-form-item",{attrs:{label:"视频详情：","label-width":e.formLabelWidth}},[a("el-button",{attrs:{size:"mini"}},[e._v("详情")])],1),a("el-form-item",{attrs:{label:"原价：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{value:e.courseInfo.isFree?"免 费":e.courseInfo.priceOriginal,autocomplete:"off",disabled:""}})],1),a("el-form-item",{attrs:{label:"优惠价：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{value:e.courseInfo.isFree?"无优惠":e.courseInfo.priceDiscount,autocomplete:"off",disabled:""}})],1),a("el-form-item",{attrs:{label:"提交日期：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{value:e._f("formatTime")(e.courseInfo.createDate,"YYYY-MM-DD HH:mm:ss"),disabled:""}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.submitForm("fail")}}},[e._v("审核不通过")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("success")}}},[e._v("审核通过")])],1)],1)],1)},p=[],h={name:"CourseEdit",props:{dialogFormVisible:{type:Boolean,default:!1},courseInfo:{type:Object,required:!0}},data:function(){return{formLabelWidth:"100px"}},computed:{isVisible:{get:function(){return this.dialogFormVisible},set:function(e){this.$emit("update:dialogFormVisible",e),this.$emit("update:isSee",!1)}}},created:function(){},methods:{submitForm:function(e){var t=this;this.$confirm("确定当前提交, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(r){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("success"!==e){a.next=5;break}return a.next=3,c(t.courseInfo.id);case 3:a.next=7;break;case 5:return a.next=7,u(t.courseInfo.id);case 7:t.$message.success("提交成功！"),t.$emit("refreshList"),t.isVisible=!1;case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(){t.$message({type:"info",message:"已取消提交"}),t.isVisible=!1}))}}},b=h,g=(a("fd81"),a("2877")),v=Object(g["a"])(b,d,p,!1,null,null,null),w=v.exports,F={name:"Course",components:{CourseEdit:w},data:function(){return{dataList:[],searchFormData:{title:"",isFree:"",isAudit:""},total:0,currentPage:1,pageSize:10,dialogFormVisible:!1,courseInfo:{},loading:!0}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.fetchCourseList();case 1:case"end":return t.stop()}}),t)})))()},methods:{fetchCourseList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o();case 3:a=t.sent,r=a.data,e.total=r.total,e.dataList=r.records,t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](0);case 11:e.loading=!1;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},queryCourse:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={keyWord:e.searchFormData.title,isFree:e.searchFormData.isFree,isAudit:e.searchFormData.isAudit},e.currentPage=1,e.pageSize=10,t.next=5,l(a);case 5:r=t.sent,i=r.data,e.total=i.total,e.dataList=i.records;case 9:case"end":return t.stop()}}),t)})))()},onSubmit:Object(m["a"])((function(){this.searchFormData.title||""!==this.searchFormData.isFree||""!==this.searchFormData.isAudit?this.queryCourse():this.$message({message:"请输入或选择内容后再查询！",type:"warning"})}),2e3,!0),onReset:Object(m["a"])((function(){this.currentPage=1,this.pageSize=10,this.searchFormData.title="",this.searchFormData.isFree="",this.searchFormData.isAudit="",this.fetchCourseList()}),2e3,!0),setIndex:function(e){return(this.currentPage-1)*this.pageSize+e+1},detail:function(){this.$message("详情内容")},handlerAudit:function(e){this.courseInfo=e,this.dialogFormVisible=!0},handlerDel:function(e){var t=this;this.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,f(e);case 2:t.$message.success("删除课程成功！"),t.fetchCourseList();case 4:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleCurrentChange:function(e){this.currentPage=e}}},x=F,y=(a("6c5d"),Object(g["a"])(x,r,i,!1,null,"4a2d56cf",null));t["default"]=y.exports},fd81:function(e,t,a){"use strict";a("6b49")}}]);